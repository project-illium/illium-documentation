"use strict";(self.webpackChunkillium_documentation=self.webpackChunkillium_documentation||[]).push([[643],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>m});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c=r.createContext({}),p=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},s=function(e){var t=p(e.components);return r.createElement(c.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},f=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,c=e.parentName,s=o(e,["components","mdxType","originalType","parentName"]),u=p(n),f=i,m=u["".concat(c,".").concat(f)]||u[f]||d[f]||a;return n?r.createElement(m,l(l({ref:t},s),{},{components:n})):r.createElement(m,l({ref:t},s))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,l=new Array(a);l[0]=f;var o={};for(var c in t)hasOwnProperty.call(t,c)&&(o[c]=t[c]);o.originalType=e,o[u]="string"==typeof e?e:i,l[1]=o;for(var p=2;p<a;p++)l[p]=n[p];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}f.displayName="MDXCreateElement"},8814:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>d,frontMatter:()=>a,metadata:()=>o,toc:()=>p});var r=n(7462),i=(n(7294),n(3905));const a={sidebar_position:1,description:"Illium API overview"},l="Overview",o={unversionedId:"api/overview",id:"api/overview",title:"Overview",description:"Illium API overview",source:"@site/docs/api/overview.md",sourceDirName:"api",slug:"/api/overview",permalink:"/docs/api/overview",draft:!1,editUrl:"https://github.com/project-illium/illium-documentation/docs/api/overview.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,description:"Illium API overview"},sidebar:"apiSidebar",next:{title:"Blockchain Service",permalink:"/docs/api/blockchain_service"}},c={},p=[{value:"Running the rpc server",id:"running-the-rpc-server",level:3},{value:"TLS",id:"tls",level:3},{value:"Client Authentication",id:"client-authentication",level:3},{value:"gRPC Web",id:"grpc-web",level:3}],s={toc:p},u="wrapper";function d(e){let{components:t,...n}=e;return(0,i.kt)(u,(0,r.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"overview"},"Overview"),(0,i.kt)("p",null,"Ilxd offers a full-featured gRPC API which can be used to control the running full node, interact with the internal\nwallet, act as a high-powered blockchain server, and even act as an indexed wallet server for lite wallets. "),(0,i.kt)("h3",{id:"running-the-rpc-server"},"Running the rpc server"),(0,i.kt)("p",null,"By default, ilxd will start the blockchain service, node service, and wallet service and only accept connections from\nlocalhost."),(0,i.kt)("p",null,"If you want to except external connections you will need to use the ",(0,i.kt)("inlineCode",{parentName:"p"},"grpclisten")," command line option:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"ilxd --grpclisten=/ip4/0.0.0.0/tcp/5001\n")),(0,i.kt)("p",null,"Optionally, you can also put this in the ilxd config file:"),(0,i.kt)("p",null,"ilxd.conf:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"grpclisten=/ip4/0.0.0.0/tcp/5001\n")),(0,i.kt)("p",null,"If you want to disable the node service or the wallet service you can do so again with either a command line option:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"--disablenodeservice\n--disablewalletservice\n")),(0,i.kt)("p",null,"Or a config option:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"disablenodeservice=1\ndisablewalletservice=1\n")),(0,i.kt)("h3",{id:"tls"},"TLS"),(0,i.kt)("p",null,"Grpc requires the use of TLS for all RPCs. On first startup, ilxd will generate a self-signed certificate and put it in the\napplication directory. "),(0,i.kt)("p",null,"On linux the default is:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"$HOME/.ilxd/rpc.cert\n")),(0,i.kt)("p",null,"By default this certificate is used by the gRPC server. If for some reason you wish to generate a new certificate you can\nsimply delete the ",(0,i.kt)("inlineCode",{parentName:"p"},"rpc.cert")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"rpc.key")," files and it will generate new ones on next startup."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("em",{parentName:"strong"},"NOTE")),": If a server using a self-signed certificate is running on a different machine from the client(s) the server's\nexternal IP address will need to be in the certificate for it to work. To tell ilxd to generate the certificate using your\nexternal IP address use the following option on first startup or when generating a new certificate:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"--externalIP=<your_ip_address>\n")),(0,i.kt)("p",null,"To connect to a server using a self-signed certificate all clients will need to be in possession of the ",(0,i.kt)("inlineCode",{parentName:"p"},"rpc.cert")," and\nuse it in the client configuration. "),(0,i.kt)("p",null,"For example, in Go:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-go"},'certificateFile := filepath.Join(bchutil.AppDataDir("ilxd", false), "rpc.cert")\ncreds, err := credentials.NewClientTLSFromFile(certificateFile, "localhost")\nif err != nil {\n    fmt.Println(err)\n    return\n}\ntlsOption := grpc.WithTransportCredentials(creds)\n')),(0,i.kt)("p",null,"If you have a valid TLS certificate signed by a certificate authority you may use it and avoid the need to distribute\nthe certificate to clients. "),(0,i.kt)("p",null,"To configure ilxd to use your certificate use the following options:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"--rpccert=/path/to/rcp.cert\n--rpckey=/parth/to/rpc.key\n")),(0,i.kt)("p",null,"Clients can then be configured as follows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-go"},'tlsOption := gprc.WithTransportCredentials(credentials.NewClientTLSFromCert(nil, "")\n')),(0,i.kt)("h3",{id:"client-authentication"},"Client Authentication"),(0,i.kt)("p",null,"Clients are not authenticated by default. You can require client authentication by setting an authentication key on ilxd\neither as a command line option:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"--grpcauthtoken=<long_random_authentication_token>\n")),(0,i.kt)("p",null,"Or in the config file:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"grpcauthtoken=<long_random_authentication_token>\n")),(0,i.kt)("p",null,"Clients then need to include the authentication token is the RPC request context:"),(0,i.kt)("p",null,"For example, in Go:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-go"},'md := metadata.Pairs("AuthenticationToken", "long_random_authentication_token")\nctx := metadata.NewOutgoingContext(context.Background(), md)\n\n// Make the RPC\nresponse, err := client.SomeRPC(ctx, someRequest)\n')),(0,i.kt)("h3",{id:"grpc-web"},"gRPC Web"),(0,i.kt)("p",null,"Ilxd multiplexes gRPC Web over the same endpoint as standard gRPC so that the server can also be queried from web browsers."))}d.isMDXComponent=!0}}]);